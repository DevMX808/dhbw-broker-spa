<div class="settings-page">
  <h1 class="settings-title">âš™ï¸ Einstellungen</h1>

  <div *ngIf="message"
       class="alert"
       [ngClass]="{'alert-success': !isError, 'alert-danger': isError}">
    {{ message }}
  </div>

  <div class="settings-grid">

    <div class="settings-card">
      <div class="card-header">ğŸ‘¤ Profil Ã¤ndern</div>
      <form (ngSubmit)="updateProfile()" #profileForm="ngForm" class="card-body">
        <div class="field-group">
          <div class="field-current">
            <label>Aktueller Vorname</label>
            <input class="form-control" type="text" [value]="currentFirstName" readonly>
          </div>
          <div class="field-new">
            <label>Neuer Vorname</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="profile.firstName"
              name="firstName"
              autocomplete="given-name">
          </div>
        </div>

        <div class="field-group">
          <div class="field-current">
            <label>Aktueller Nachname</label>
            <input class="form-control" type="text" [value]="currentLastName" readonly>
          </div>
          <div class="field-new">
            <label>Neuer Nachname</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="profile.lastName"
              name="lastName"
              autocomplete="family-name">
          </div>
        </div>

        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="isProfileDisabled()">
          ğŸ’¾ Speichern
        </button>
      </form>
    </div>

    <div class="settings-card">
      <div class="card-header">ğŸ”’ Passwort Ã¤ndern</div>
      <form (ngSubmit)="changePassword()" #passwordForm="ngForm" class="card-body">
        <input type="email" [value]="currentEmail" autocomplete="username" style="display: none;" readonly>

        <label>Aktuelles Passwort</label>
        <input class="form-control" type="password" [(ngModel)]="password.currentPassword" name="currentPassword" required placeholder="********" autocomplete="current-password">

        <label>Neues Passwort</label>
        <input class="form-control" type="password" [(ngModel)]="password.newPassword" name="newPassword" required minlength="8" placeholder="********" autocomplete="new-password">

        <button class="btn btn-primary" type="submit" [disabled]="!passwordForm.valid">ğŸ” Ã„ndern</button>
      </form>
    </div>

    <div class="settings-card">
      <div class="card-header">ğŸ“§ E-Mail Ã¤ndern</div>
      <form (ngSubmit)="changeEmail()" #emailForm="ngForm" class="card-body">
        <div class="field-group">
          <div class="field-current">
            <label>Aktuelle E-Mail</label>
            <input class="form-control" type="email" [value]="currentEmail" readonly>
          </div>
          <div class="field-new">
            <label>Neue E-Mail</label>
            <input class="form-control" type="email" [(ngModel)]="email.newEmail" name="newEmail" required autocomplete="email">
          </div>
        </div>

        <label>Passwort bestÃ¤tigen</label>
        <input class="form-control" type="password" [(ngModel)]="email.password" name="password" required placeholder="********" autocomplete="current-password">

        <button class="btn btn-primary" type="submit" [disabled]="!emailForm.valid">âœ‰ï¸ Ã„ndern</button>
      </form>
    </div>

    <div class="settings-card danger-zone">
      <div class="card-header text-danger">âš ï¸ Konto lÃ¶schen</div>
      <form (ngSubmit)="deleteAccount()" #deleteForm="ngForm" class="card-body">
        <input type="email" [value]="currentEmail" autocomplete="username" style="display: none;" readonly>

        <label>Passwort bestÃ¤tigen</label>
        <input class="form-control" type="password" [(ngModel)]="deletePassword" name="deletePassword" required placeholder="********" autocomplete="current-password">

        <button class="btn btn-danger delete-btn" type="submit" [disabled]="!deleteForm.valid">
          ğŸ—‘ï¸ Konto lÃ¶schen
        </button>
      </form>
    </div>
  </div>
</div>
