<form (ngSubmit)="onSubmit(signInForm)" #signInForm="ngForm" novalidate>
  <h1>Anmelden</h1>
  @if (authService.error()) {
    <div class="error-message" role="alert" aria-live="polite">
      {{ authService.error() }}
    </div>
  }
  <div class="form-group">
    <input
      id="signInEmail"
      type="email"
      placeholder="E-Mail"
      [(ngModel)]="credentials.email"
      name="email"
      required
      email
      #emailInput="ngModel"
      [class.error]="submitted && emailInput.invalid"
      autocomplete="username"
      aria-describedby="signInEmail-error" />
    @if (submitted && emailInput.invalid) {
      <div id="signInEmail-error" class="field-error" role="alert">
        @if (emailInput.errors?.['required']) {
          E-Mail ist erforderlich
        }
        @if (emailInput.errors?.['email']) {
          Ung√ºltige E-Mail-Adresse
        }
      </div>
    }
  </div>
  <div class="form-group">
    <input
      id="signInPassword"
      type="password"
      placeholder="Passwort"
      [(ngModel)]="credentials.password"
      name="password"
      required
      minlength="6"
      #passwordInput="ngModel"
      [class.error]="submitted && passwordInput.invalid"
      autocomplete="current-password"
      aria-describedby="signInPassword-error" />
    @if (submitted && passwordInput.invalid) {
      <div id="signInPassword-error" class="field-error" role="alert">
        @if (passwordInput.errors?.['required']) {
          Passwort ist erforderlich
        }
        @if (passwordInput.errors?.['minlength']) {
          Passwort muss mindestens 6 Zeichen lang sein
        }
      </div>
    }
  </div>
  <p>Passwort vergessen?</p>
  <button
    type="submit"
    [disabled]="authService.loading()"
    [attr.aria-disabled]="authService.loading() ? 'true' : 'false'">
    @if (authService.loading()) {
      <span class="spinner"></span> Anmelden...
    } @else {
      Anmelden
    }
  </button>
</form>
