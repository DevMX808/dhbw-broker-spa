{
  "version": 3,
  "sources": ["src/app/features/admin/containers/admin-page.component.ts", "src/app/core/auth/role.guard.ts", "src/app/features/admin/routes.ts"],
  "sourcesContent": ["import { Component } from '@angular/core';\nimport { RouterLink, RouterOutlet } from '@angular/router';\n\n@Component({\n  standalone: true,\n  selector: 'app-admin-page',\n  imports: [RouterLink, RouterOutlet],\n  template: `\n    <h1 class=\"h4\">Admin</h1>\n    <nav class=\"nav mb-3\">\n      <a class=\"nav-link\" routerLink=\"users\">Users</a>\n      <a class=\"nav-link\" routerLink=\"balances\">Balances</a>\n      <a class=\"nav-link\" routerLink=\"audit\">Audit</a>\n      <a class=\"nav-link\" routerLink=\"system-status\">System Status</a>\n    </nav>\n    <router-outlet></router-outlet>\n  `\n})\nexport class AdminPageComponent {}\n", "// src/app/core/auth/role.guard.ts\nimport { CanActivateFn, Router, ActivatedRouteSnapshot } from '@angular/router';\nimport { inject } from '@angular/core';\nimport { TokenStorageService } from './token-storage.service';\n\nexport const RoleGuard: CanActivateFn = (route: ActivatedRouteSnapshot) => {\n  const tokens = inject(TokenStorageService);\n  const router = inject(Router);\n  const token = tokens.get();\n  if (!token || tokens.isExpired(token)) {\n    router.navigateByUrl('/account');\n    return false;\n  }\n  const payload = tokens.parsePayload(token);\n  const expected: string[] = route.data?.['roles'] || [];\n  const ok = expected.length === 0 || expected.some(r => payload?.roles?.includes(r));\n  if (!ok) {\n    router.navigateByUrl('/unauthorized');\n    return false;\n  }\n  return true;\n};\n", "// src/app/features/admin/routes.ts  (Guard erg√§nzt)\nimport { Routes } from '@angular/router';\nimport { AdminPageComponent } from './containers/admin-page.component';\nimport { RoleGuard } from '../../core/auth/role.guard';\n\nexport const ADMIN_ROUTES: Routes = [\n  {\n    path: '',\n    component: AdminPageComponent,\n    title: 'Admin',\n    canActivate: [RoleGuard],\n    data: { roles: ['ADMIN'] },\n    children: [\n      { path: '', pathMatch: 'full', redirectTo: 'users' },\n    ]\n  }\n];\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAkBM,IAAO,qBAAP,MAAO,oBAAkB;;qCAAlB,qBAAkB;EAAA;yEAAlB,qBAAkB,WAAA,CAAA,CAAA,gBAAA,CAAA,GAAA,YAAA,MAAA,UAAA,CAAA,6BAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,OAAA,MAAA,GAAA,CAAA,cAAA,SAAA,GAAA,UAAA,GAAA,CAAA,cAAA,YAAA,GAAA,UAAA,GAAA,CAAA,cAAA,SAAA,GAAA,UAAA,GAAA,CAAA,cAAA,iBAAA,GAAA,UAAA,CAAA,GAAA,UAAA,SAAA,4BAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;AAV3B,MAAA,yBAAA,GAAA,MAAA,CAAA;AAAe,MAAA,iBAAA,GAAA,OAAA;AAAK,MAAA,uBAAA;AACpB,MAAA,yBAAA,GAAA,OAAA,CAAA,EAAsB,GAAA,KAAA,CAAA;AACmB,MAAA,iBAAA,GAAA,OAAA;AAAK,MAAA,uBAAA;AAC5C,MAAA,yBAAA,GAAA,KAAA,CAAA;AAA0C,MAAA,iBAAA,GAAA,UAAA;AAAQ,MAAA,uBAAA;AAClD,MAAA,yBAAA,GAAA,KAAA,CAAA;AAAuC,MAAA,iBAAA,GAAA,OAAA;AAAK,MAAA,uBAAA;AAC5C,MAAA,yBAAA,GAAA,KAAA,CAAA;AAA+C,MAAA,iBAAA,IAAA,eAAA;AAAa,MAAA,uBAAA,EAAI;AAElE,MAAA,oBAAA,IAAA,eAAA;;oBATQ,YAAY,YAAY,GAAA,eAAA,EAAA,CAAA;;;6EAYvB,oBAAkB,EAAA,WAAA,qBAAA,CAAA;AAAA,GAAA;;;ACbxB,IAAM,YAA2B,CAAC,UAAiC;AACxE,QAAM,SAAS,OAAO,mBAAmB;AACzC,QAAM,SAAS,OAAO,MAAM;AAC5B,QAAM,QAAQ,OAAO,IAAG;AACxB,MAAI,CAAC,SAAS,OAAO,UAAU,KAAK,GAAG;AACrC,WAAO,cAAc,UAAU;AAC/B,WAAO;EACT;AACA,QAAM,UAAU,OAAO,aAAa,KAAK;AACzC,QAAM,WAAqB,MAAM,OAAO,OAAO,KAAK,CAAA;AACpD,QAAM,KAAK,SAAS,WAAW,KAAK,SAAS,KAAK,OAAK,SAAS,OAAO,SAAS,CAAC,CAAC;AAClF,MAAI,CAAC,IAAI;AACP,WAAO,cAAc,eAAe;AACpC,WAAO;EACT;AACA,SAAO;AACT;;;AChBO,IAAM,eAAuB;EAClC;IACE,MAAM;IACN,WAAW;IACX,OAAO;IACP,aAAa,CAAC,SAAS;IACvB,MAAM,EAAE,OAAO,CAAC,OAAO,EAAC;IACxB,UAAU;MACR,EAAE,MAAM,IAAI,WAAW,QAAQ,YAAY,QAAO;;;;",
  "names": []
}
